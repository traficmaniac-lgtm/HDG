# Структура проекта

Этот документ описывает основные директории, назначение каждого уровня и то,
как они связаны между собой.

## Верхний уровень

- `README.md` — краткая инструкция по запуску и назначению проекта.
- `requirements.txt` — зависимости Python.
- `RUN_GUI.ps1` — сценарий запуска GUI в Windows.
- `.env.example` — пример переменных окружения.
- `src/` — исходный код приложения.
- `docs/` — документация по архитектуре и алгоритмам.
- `tests/` — тесты и сценарии проверки (при наличии).

## Директория `src/`

### `src/app/`

- точка входа GUI и запуск приложения;
- связывает UI, `TradeEngine` и сервисы данных.

### `src/core/`

- модели данных и конфигурации;
- логирование, форматирование и ротация логов;
- конечный автомат состояния `BotStateMachine`;
- торговый движок `TradeEngine` — оркестратор всего цикла.

### `src/engine/`

- реализация торгового цикла;
- логика хедж-входа, детект победителя, сопровождение и выход;
- тестовый режим и симуляции.

### `src/exchange/`

- слой исполнения ордеров;
- реализация для Binance Cross Margin;
- методы выставления, отмены, ожидания фила и repay.

### `src/services/`

- источники рыночных данных (WS/HTTP);
- агрегатор рыночных данных и выбор эффективного источника;
- вспомогательные сервисы.

### `src/gui/`

- пользовательский интерфейс;
- вкладки параметров, настроек, состояния;
- общие виджеты и утилиты UI.

## Поток данных высокого уровня

1. GUI инициирует подключение и параметры стратегии.
2. `core.trade_engine.TradeEngine` держит состояние, управляет циклом
   и координирует исполнение.
3. `engine.directional_cycle.DirectionalCycle` реализует торговый цикл.
4. `services.market_data.MarketDataService` собирает и выбирает источники тиков.
5. `exchange.binance_margin.BinanceMarginExecution` исполняет заявки через REST.

## Ключевые точки интеграции

- **GUI → TradeEngine**: ввод параметров, запуск/остановка цикла.
- **TradeEngine → DirectionalCycle**: запуск входа, передача тиков, статусов.
- **DirectionalCycle → Exchange**: размещение, отмена и ожидание ордеров.
- **MarketDataService → DirectionalCycle**: актуальные данные и метрики свежести.

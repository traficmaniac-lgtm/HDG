# Ответственность каждого файла

Ниже перечислено, за что отвечает каждый файл в репозитории.

## Корень репозитория

- `.env.example` — шаблон переменных окружения (ключи API, режимы работы).
- `.gitignore` — исключения для Git.
- `.gitkeep` — удерживает пустую директорию (если есть).
- `README.md` — описание продукта и базовые инструкции.
- `requirements.txt` — список Python-зависимостей.
- `RUN_GUI.ps1` — скрипт автозапуска GUI на Windows.

## `src/`

### `src/app/`

- `__init__.py` — пакет приложения.
- `main.py` — точка входа GUI: создание окна, инициализация движка,
  запуск сервисов и событийного цикла.

### `src/core/`

- `__init__.py` — пакет ядра.
- `config_store.py` — хранение и загрузка параметров/настроек (локально).
- `logger.py` — настройка логирования, форматирование и ротация логов.
- `models.py` — dataclass-модели: параметры стратегии, фильтры символа,
  рыночные данные, записи сделок.
- `state_machine.py` — конечный автомат состояний торгового цикла.
- `trade_engine.py` — центральный движок: связывает UI, данные, цикл и исполнение,
  переключает режимы, управляет жизненным циклом.
- `version.py` — версия/метаданные приложения.

### `src/engine/`

- `__init__.py` — пакет торговых алгоритмов.
- `directional_cycle.py` — основной торговый цикл хедж-скальпинга:
  вход, детект победителя, отсечение проигравшего, сопровождение и выход,
  аварийное выравнивание.
- `test_mode.py` — режим тестирования/эмуляции сценариев.

### `src/exchange/`

- `__init__.py` — пакет биржевого слоя.
- `binance_margin.py` — реализация исполнения ордеров на Binance Cross Margin:
  размещение ордеров, проверка статуса, отмена, repay и получение аккаунта.

### `src/services/`

- `__init__.py` — пакет сервисов данных.
- `binance_rest.py` — REST клиент Binance (ордера, аккаунт, стакан).
- `http_fallback.py` — HTTP fallback-источник котировок при проблемах с WS.
- `market_data.py` — выбор эффективного источника тиков, контроль свежести
  и переключение WS/HTTP.
- `orderbook.py` — сбор и агрегация данных стакана.
- `ws_market.py` — WebSocket поток рыночных данных.

### `src/gui/`

- `__init__.py` — пакет UI.
- `main_window.py` — главное окно GUI и навигация.
- `parameters_tab.py` — вкладка параметров стратегии.
- `settings_tab.py` — вкладка настроек/подключения.
- `widgets.py` — общие виджеты и UI-утилиты.

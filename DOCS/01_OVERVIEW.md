# Overview

## Назначение проекта
Directional Hedge Scalper — GUI‑клиент для управляемого тестового цикла BUY → SELL на Binance (Cross Margin). Пользователь вручную инициирует цикл, а торговая логика обеспечивает детерминированное исполнение, защитные таймауты и контроль статусов.

## Что делает бот
- Подключает Market Data (WS + HTTP), считает и отображает bid/ask/mid и возраст данных.
- Запускает торговый цикл по кнопке **START** и управляет состояниями BUY/SELL.
- Использует «follow‑top» на входе: может перецеплять лимитный BUY вслед за ростом bid при соблюдении фильтров стабильности.
- Автоматически закрывает позицию по TP/SL в тиках, если включён авто‑выход.
- Отслеживает ордера, частичные исполнения, TTL, повторы/отмены, логирует причины выхода и PnL.

## Чего НЕ делает бот
- Не принимает торговые решения (нет стратегии, нет входа по сигналам).
- Не открывает позицию без явного START.
- Не выставляет параллельные торговые действия (single‑flight в одном цикле).
- Не считает комиссии/фандинг/проценты по займу в PnL.

## Торговый инструмент и режим
- Инструмент задаётся настройками (по умолчанию **EURIUSDT** в GUI).
- Режим маржи: Cross/Isolated управляется настройкой `margin_isolated` (по умолчанию Cross).

## Ключевые элементы алгоритма
- **Вход**: лимитный BUY по bid + `entry_offset_ticks` с проверками minQty/minNotional и бюджета.
- **Follow‑top**: репрайс BUY только если bid продвинулся ≥ `entry_reprice_min_ticks`, прошло ≥ `entry_reprice_cooldown_ms` и данные стабильны.
- **Выход**: TP/SL по mid (с проверкой свежести), выставление SELL (LIMIT или MARKET по настройкам).
- **Защиты**: таймаут ожидания цены (`max_wait_price_ms`), общий таймаут входа (`max_entry_total_ms`), TTL для SELL (`sell_ttl_ms`), контроль заморозки выхода при «blackout» данных.

## Текущий фокус развития
Документация описывает фактическую реализацию в `TradeExecutor`, `PriceRouter`, `OrderTracker` и сервисах котировок.
